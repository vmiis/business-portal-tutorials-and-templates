<a id=back__ID onclick="$vm.back({div:'__ID'});" class="w3-bar-item w3-button"><i class="fa fa-arrow-left"></i> Back</a>
<script>$('#back__ID').css('top',$vm.header_height+'px')</script><style>#back__ID{position:fixed;}</style>

<div class="w3-container w3-center" id="contact">
  <h3 class="w3-center">CONTACT</h3>
  <p class="w3-center w3-large">Lets get in touch. Send us a message:</p>
  <div class="w3-row-padding" style="margin-top:64px;max-width:800px;width:100%;display:inline-block">
    <div>
      <p><i class="fa fa-envelope fa-fw w3-xxlarge w3-margin-right"> </i> Email: zzm.vmiis@mail.com</p>
      <br>
      <form id=form__ID>
        <p><input class="w3-input w3-border" type="text" placeholder="Name" required name="Name" id="Name__ID"></p>
        <p><input class="w3-input w3-border" type="text" placeholder="Email" required name="Email" id="Email__ID"></p>
        <p><input class="w3-input w3-border" type="text" placeholder="Subject" required name="Subject" id="Subject__ID"></p>
        <p><textarea class="w3-input w3-border" type="text" placeholder="Message" required name="Message" id="Message__ID"></textarea></p>
		<p><img id="captha" ></img></p>
		<p><input type="text" class="w3-input w3-border w3-round" id="Code__ID" placeholder="Please fill in the number above here"></p>
        <p>
		  <br>
          <button id=submit__ID class="w3-button w3-black" type=submit><i class="fa fa-paper-plane"></i> SEND MESSAGE</button>
        </p>
      </form>
    </div>
  </div>
</div>
<script>
	$('#D__ID').css('height','100%');
	$('#D__ID').on('load',function(){
		$VmAPI.request({data:{cmd:'captha'},callback:function(res){
			$("#captha").attr("src", "data:image/png;base64,"+res.captha);
		}})
		$('#submit__ID').show();
	})
	$('#submit__ID').on('click',function(){
		//-------------------------------------
		var form = document.getElementById('form__ID');
		for(var i=0; i < form.elements.length; i++){
      		if(form.elements[i].value === '' && form.elements[i].hasAttribute('required')){
        		return;
      		}
    	}
		//-------------------------------------
		var tid=$vm.app_config.modules.contact.table_id;
		var record={}
		record.Name=$('#Name__ID').val();
		record.Email=$('#Email__ID').val();
		record.Subject=$('#Subject__ID').val();
		record.Message=$('#Message__ID').val();
		var dbv={};
		var req={cmd:"add_record_anonymous_with_captcha",db_pid:tid,data:record,dbv:dbv,captcha:$('#Code__ID').val()};
		$VmAPI.request({data:req,callback:function(res){
			if(res.ret=='-1'){
				alert('The verification code is not correct.');
				return;
			}
			$vm.alert('Thank you for your message!');
			form.reset();
			$('#submit__ID').hide();
		}});
		//-------------------------------------
		return false;
	})
</script>
<style>
	#D__ID{
		background: rgba(255,255,255,0.9);
		height:100%;
		padding-top:30px;
		overflow: auto;
	}
</style>
